<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | TobiForce HRMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #ffffff;
            overflow: hidden;
        }

        /* Enhanced & Animated Mesh Gradient */
        .mesh-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-color: #ffffff;
            background-image: 
                radial-gradient(at 0% 0%, rgba(99, 102, 241, 0.3) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(56, 189, 248, 0.4) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(236, 72, 153, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 100%, rgba(79, 70, 229, 0.25) 0px, transparent 50%),
                radial-gradient(at 50% 50%, rgba(199, 210, 254, 0.3) 0px, transparent 50%);
            background-size: 200% 200%;
            animation: meshMove 12s ease-in-out infinite;
        }

        @keyframes meshMove {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        /* Floating Animation */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(0.5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        .auth-card {
            animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), float 6s ease-in-out infinite;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Glassmorphism Contrast */
        .glass-card {
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(25px) saturate(200%);
            -webkit-backdrop-filter: blur(25px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.08),
                inset 0 0 0 1px rgba(255, 255, 255, 0.4);
        }

        .input-focus {
            background: rgba(255, 255, 255, 0.8) !important;
            border: 2px solid #f1f5f9;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-focus:focus-within {
            border-color: #6366f1;
            box-shadow: 0 12px 20px -5px rgba(99, 102, 241, 0.15);
            transform: translateY(-2px);
        }

        .noise {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.03;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .btn-shimmer {
            position: relative;
            overflow: hidden;
        }

        .btn-shimmer::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
            display: block;
        }

        .btn-shimmer:hover::after {
            left: 100%;
            top: 100%;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

    <div class="mesh-bg"></div>
    <div class="noise"></div>

    <div class="w-full max-w-[420px] auth-card">
        <div class="text-center mb-10">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-white text-indigo-600 rounded-[2.5rem] shadow-2xl shadow-indigo-200/50 mb-6 transform hover:scale-110 transition-all duration-500 cursor-pointer group border border-white">
                <i class="fas fa-bolt-lightning text-3xl group-hover:rotate-12 transition-transform"></i>
            </div>
            <h1 class="text-4xl font-black text-slate-900 tracking-tighter">
                TobiForce <span class="bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-sky-500 italic">HRMS</span>
            </h1>
            <p class="text-slate-400 text-[10px] mt-3 uppercase tracking-[0.4em] font-black opacity-80">Cloud Infrastructure Access</p>
        </div>

        <div class="glass-card rounded-[3.5rem] p-10 relative">
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-indigo-200/30 rounded-full blur-3xl"></div>
            
            <form id="formLogin" class="space-y-6 relative z-10">
                <div class="space-y-2">
                    <label class="block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2">User Credential</label>
                    <div class="relative group input-focus rounded-2xl transition-all">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-slate-300 group-focus-within:text-indigo-500 transition-colors">
                            <i class="fas fa-id-card-clip text-sm"></i>
                        </span>
                        <input type="text" id="user" required
                            class="w-full pl-12 pr-4 py-4 bg-transparent rounded-2xl focus:outline-none transition-all text-slate-700 placeholder-slate-300 font-bold" 
                            placeholder="Username">
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2">Secure Passkey</label>
                    <div class="relative group input-focus rounded-2xl transition-all">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-slate-300 group-focus-within:text-indigo-500 transition-colors">
                            <i class="fas fa-shield-halved text-sm"></i>
                        </span>
                        <input type="password" id="pass" required
                            class="w-full pl-12 pr-4 py-4 bg-transparent rounded-2xl focus:outline-none transition-all text-slate-700 placeholder-slate-300 font-bold" 
                            placeholder="••••••••">
                    </div>
                </div>

                <div class="pt-4">
                    <button type="submit" id="btnSubmit"
                        class="btn-shimmer w-full py-4 bg-slate-900 hover:bg-indigo-600 text-white font-black rounded-2xl transition-all shadow-xl shadow-indigo-100 flex items-center justify-center space-x-3 active:scale-[0.94] group">
                        <span class="tracking-widest text-[11px] uppercase">Login</span>
                        <i class="fas fa-right-to-bracket text-[10px] group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
            </form>

            <div id="pesan" class="mt-8 text-center text-[10px] font-black tracking-widest min-h-[16px] transition-all uppercase"></div>
        </div>

        <div class="text-center mt-12">
            <p class="text-slate-400 text-[9px] font-black uppercase tracking-[0.5em] opacity-60">
                &copy; 2026 | TobiProject
            </p>
        </div>
    </div>

    <script>
        /* Security */
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = e => { if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73)) return false; };

        /* Login Logic */
        document.getElementById('formLogin').addEventListener('submit', async function(e) {
            e.preventDefault();
            const pesan = document.getElementById('pesan');
            const btn = document.getElementById('btnSubmit');
            const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbw46s9Pna-Qu3W2EBTkFrFbvkHYmVy_bAIa9Ktz840IvZZTKtuqadURx7kLyhtHvz06Xg/exec";

            pesan.innerHTML = `<span class="text-indigo-600 animate-pulse">Authenticating System...</span>`;
            btn.disabled = true;
            btn.style.opacity = '0.6';

            try {
                const response = await fetch(URL_SCRIPT, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'login',
                        username: document.getElementById('user').value,
                        password: document.getElementById('pass').value
                    })
                });
                const data = await response.json();

                if (data.status === 'sukses') {
                    localStorage.clear();
                    const roleUser = data.role.toLowerCase().trim();
                    localStorage.setItem("userName", document.getElementById('user').value);
                    localStorage.setItem("userRole", roleUser);
                    pesan.innerHTML = `<span class="text-emerald-500">Access Granted. Redirecting...</span>`;
                    setTimeout(() => { window.location.href = roleUser === 'admin' ? "./admin/dataStaff.html" : "./staff/dashboard.html"; }, 1000);
                } else {
                    pesan.innerHTML = `<span class="text-rose-500">${data.msg}</span>`;
                    btn.disabled = false; btn.style.opacity = '1';
                }
            } catch (err) {
                pesan.innerHTML = `<span class="text-rose-600 font-black">Secure Link Failure</span>`;
                btn.disabled = false; btn.style.opacity = '1';
            }
        });

        window.onload = () => {
            if (localStorage.getItem("userRole")) {
                window.location.href = localStorage.getItem("userRole") === 'admin' ? "./admin/dataStaff.html" : "./staff/staff.html";
            }
        };
    </script>
</body>
</html>